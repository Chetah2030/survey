<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>–ê–Ω–æ–Ω–∏–º–Ω—ã–π –æ–ø—Ä–æ—Å</title>
  <style>
    body {
      margin: 0;
      font-family: Arial, Helvetica, sans-serif;
      background: linear-gradient(135deg, #0f2027, #203a43, #2c5364);
      color: #fff;
    }
    .container {
      max-width: 700px;
      margin: 0 auto;
      padding: 40px 20px;
    }
    h1 {
      text-align: center;
      margin-bottom: 10px;
    }
    p.subtitle {
      text-align: center;
      opacity: 0.85;
      margin-bottom: 40px;
    }
    .card {
      background: rgba(0, 0, 0, 0.35);
      border-radius: 16px;
      padding: 24px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.4);
    }
    .question {
      margin-bottom: 24px;
    }
    .question label {
      display: block;
      font-weight: bold;
      margin-bottom: 8px;
    }
    select, textarea {
      width: 100%;
      padding: 12px;
      border-radius: 10px;
      border: none;
      outline: none;
      font-size: 14px;
    }
    textarea {
      resize: vertical;
      min-height: 90px;
    }
    .options label {
      display: block;
      margin-bottom: 6px;
      font-weight: normal;
      cursor: pointer;
    }
    .options input {
      margin-right: 8px;
    }
    button {
      width: 100%;
      padding: 14px;
      border: none;
      border-radius: 12px;
      background: #ff3c3c;
      color: #fff;
      font-size: 16px;
      font-weight: bold;
      cursor: pointer;
    }
    .disabled {
      opacity: 0.5;
      pointer-events: none;
    }
    .notice {
      text-align: center;
      margin-bottom: 20px;
      color: #ffd966;
      font-size: 14px;
    }
    .footer {
      text-align: center;
      margin-top: 24px;
      font-size: 12px;
      opacity: 0.6;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>–ê–Ω–æ–Ω–∏–º–Ω—ã–π –æ–ø—Ä–æ—Å</h1>
    <p class="subtitle">–û–ø—Ä–æ—Å –º–æ–∂–Ω–æ –ø—Ä–æ—Ö–æ–¥–∏—Ç—å –Ω–µ —á–∞—â–µ –æ–¥–Ω–æ–≥–æ —Ä–∞–∑–∞ –≤ 14 –¥–Ω–µ–π</p>

    <div id="notice" class="notice" style="display:none"></div>

    <div class="card" id="surveyCard">
      <form onsubmit="handleSubmit(event)">

        <div class="question">
          <label>1. –ß—Ç–æ –±—ã –≤—ã —Ö–æ—Ç–µ–ª–∏ —É–ª—É—á—à–∏—Ç—å –≤–æ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–∏ —Å–æ —Å–≤–æ–∏–º —Ä—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª–µ–º?</label>
          <textarea name="q1" placeholder="–í–∞—à –æ—Ç–≤–µ—Ç"></textarea>
        </div>

        <div class="question">
          <label>2. –ï—Å—Ç—å –ª–∏ —Ä—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—å, —Å –∫–µ–º —Å–ª–æ–∂–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å? –ü–æ—á–µ–º—É?</label>
          <textarea name="q2" placeholder="–í–∞—à –æ—Ç–≤–µ—Ç"></textarea>
        </div>

        <div class="question">
          <label>3. –ï—Å—Ç—å –ª–∏ —Ä—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—å, —Å –∫–µ–º –∫–æ–º—Ñ–æ—Ä—Ç–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å? –ü–æ—á–µ–º—É?</label>
          <textarea name="q3" placeholder="–í–∞—à –æ—Ç–≤–µ—Ç"></textarea>
        </div>

        <div class="question">
          <label>4. –ß—Ç–æ –≤–∞–º –Ω—Ä–∞–≤–∏—Ç—Å—è –≤ –ø–∏—Ç–∞–Ω–∏–∏?</label>
          <textarea name="q4" placeholder="–í–∞—à –æ—Ç–≤–µ—Ç"></textarea>
        </div>

        <div class="question">
          <label>5. –ß—Ç–æ –≤–∞–º –Ω–µ –Ω—Ä–∞–≤–∏—Ç—Å—è –≤ –ø–∏—Ç–∞–Ω–∏–∏ –∏ –∫–∞–∫ —ç—Ç–æ –º–æ–∂–Ω–æ —É–ª—É—á—à–∏—Ç—å?</label>
          <textarea name="q5" placeholder="–í–∞—à –æ—Ç–≤–µ—Ç"></textarea>
        </div>

        <div class="question">
          <label>6. –ö–∞–∫–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è —É—Å–ª–æ–≤–∏–π —Ç—Ä—É–¥–∞ –≤–∞–∂–Ω—ã –ª–∏—á–Ω–æ –¥–ª—è –≤–∞—Å?</label>
          <textarea name="q6" placeholder="–í–∞—à –æ—Ç–≤–µ—Ç"></textarea>
        </div>

        <button type="submit">–û—Ç–ø—Ä–∞–≤–∏—Ç—å –æ–ø—Ä–æ—Å</button>
      </form>
    </div>

    <div class="footer">–î–∞–Ω–Ω—ã–µ –Ω–µ —Å–æ–¥–µ—Ä–∂–∞—Ç –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏</div>
  </div>

  <script>
    const PERIOD_DAYS = 14;
    const STORAGE_KEY = 'survey_last_submit';

    // üî¥ –í–°–¢–ê–í–¨–¢–ï –°–Æ–î–ê URL Google Apps Script
    const GOOGLE_SCRIPT_URL = AKfycbxAj_iUaDGKae49zDEdldtp0pXwJu1-iRPDeI4oQTAoUUmZD-csFN3Y1FWHSKq_kvw
    function daysBetween(a, b) {
      return Math.floor((b - a) / (1000 * 60 * 60 * 24));
    }

    function lockSurvey(daysLeft) {
      document.getElementById('surveyCard').classList.add('disabled');
      const notice = document.getElementById('notice');
      notice.style.display = 'block';
      notice.innerText = `–í—ã —É–∂–µ –ø—Ä–æ—Ö–æ–¥–∏–ª–∏ –æ–ø—Ä–æ—Å. –ü–æ–≤—Ç–æ—Ä–Ω–æ –º–æ–∂–Ω–æ —á–µ—Ä–µ–∑ ${daysLeft} –¥–Ω.`;
    }

    function handleSubmit(e) {
      e.preventDefault();

      const form = e.target;
      const data = {
        q1: form.q1.value,
        q2: form.q2.value,
        q3: form.q3.value,
        q4: form.q4.value,
        q5: form.q5.value,
        q6: form.q6.value,
        timestamp: new Date().toISOString()
      };

      fetch(GOOGLE_SCRIPT_URL, {
        method: 'POST',
        mode:  'no-cors',
        body: JSON.stringify(data),
      }).then(() => {
        localStorage.setItem(STORAGE_KEY, Date.now().toString());
        alert('–°–ø–∞—Å–∏–±–æ! –í–∞—à –∞–Ω–æ–Ω–∏–º–Ω—ã–π –æ—Ç–≤–µ—Ç —Å–æ—Ö—Ä–∞–Ω—ë–Ω.');
        form.reset();
        checkAndLock();
      }).catch(() => {
        alert('–û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ.');
      });
    }

    function checkAndLock() {
      const last = localStorage.getItem(STORAGE_KEY);
      if (!last) return;

      const lastDate = new Date(parseInt(last));
      const now = new Date();
      const passed = daysBetween(lastDate, now);

      if (passed < PERIOD_DAYS) {
        lockSurvey(PERIOD_DAYS - passed);
      }
    }

    checkAndLock();
  </script>
</body>
</html>
